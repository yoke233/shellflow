@import "tailwindcss";

:root {
  --sidebar-width: 240px;
  --right-panel-width: 280px;

  /* Body/document - defaults, overridden by theme */
  --body-bg: #09090b;
  --body-fg: #fafafa;

  /* Background scale (darkest to lightest) */
  --bg-0: #09090b;
  --bg-1: #18181b;
  --bg-2: #27272a;
  --bg-3: #3f3f46;
  --bg-4: #52525b;

  /* Text colors (brightest to dimmest) */
  --fg-0: #fafafa;
  --fg-1: #e4e4e7;
  --fg-2: #a1a1aa;
  --fg-3: #71717a;
  --fg-4: #52525b;

  /* Borders */
  --border-0: #27272a;
  --border-1: #3f3f46;
  --border-2: #52525b;

  /* Sidebar */
  --sidebar-bg: #18181b;
  --sidebar-fg: #fafafa;
  --sidebar-border: #27272a;
  --sidebar-item-hover: #27272a;
  --sidebar-item-active: #3f3f46;

  /* Modal theming */
  --modal-backdrop: rgba(0, 0, 0, 0.5);
  --modal-bg: rgba(39, 39, 42, 0.98);
  --modal-border: rgba(255, 255, 255, 0.08);
  --modal-shadow: 0 24px 48px rgba(0, 0, 0, 0.4), 0 0 1px rgba(0, 0, 0, 0.5);

  /* Modal list items */
  --modal-item-highlight: rgba(255, 255, 255, 0.08);
  --modal-item-text: rgba(255, 255, 255, 0.9);
  --modal-item-text-muted: rgba(255, 255, 255, 0.5);
  --modal-error-bg: rgba(239, 68, 68, 0.16);
  --modal-error-border: rgba(239, 68, 68, 0.4);
  --modal-error-text: rgba(254, 202, 202, 0.95);

  /* Modal inputs */
  --modal-input-bg: rgba(0, 0, 0, 0.25);
  --modal-input-border: rgba(255, 255, 255, 0.1);
  --modal-input-focus-border: rgba(255, 255, 255, 0.2);

  /* Modal footer */
  --modal-footer-bg: rgba(0, 0, 0, 0.15);
  --modal-footer-border: rgba(255, 255, 255, 0.06);

  /* Keyboard hints */
  --kbd-bg: rgba(255, 255, 255, 0.08);
  --kbd-border: rgba(255, 255, 255, 0.1);
  --kbd-text: rgba(255, 255, 255, 0.5);

  /* Buttons */
  --btn-secondary-bg: rgba(255, 255, 255, 0.08);
  --btn-secondary-bg-hover: rgba(255, 255, 255, 0.14);
  --btn-secondary-border: rgba(255, 255, 255, 0.1);
  --btn-secondary-text: rgba(255, 255, 255, 0.8);

  --btn-primary-bg: rgba(59, 130, 246, 0.8);
  --btn-primary-bg-hover: rgba(59, 130, 246, 1);
  --btn-primary-border: rgba(96, 165, 250, 0.3);
  --btn-primary-text: rgba(255, 255, 255, 1);

  --btn-danger-bg: rgba(220, 38, 38, 0.75);
  --btn-danger-bg-hover: rgba(220, 38, 38, 0.95);
  --btn-danger-border: rgba(248, 113, 113, 0.3);
  --btn-danger-text: rgba(255, 255, 255, 1);

  --btn-purple-bg: rgba(147, 51, 234, 0.75);
  --btn-purple-bg-hover: rgba(147, 51, 234, 0.95);
  --btn-purple-border: rgba(192, 132, 252, 0.3);
  --btn-purple-text: rgba(255, 255, 255, 1);

  /* Scrollbar */
  --scrollbar-thumb: rgba(255, 255, 255, 0.2);
  --scrollbar-thumb-hover: rgba(255, 255, 255, 0.35);

  /* Accent color */
  --accent: #60a5fa;
  --accent-fg: #ffffff;

  /* Status colors */
  --success: #22c55e;
  --warning: #eab308;
  --error: #ef4444;
  --info: #3b82f6;

  /* Panel resize handles */
  --resize-handle: #3f3f46;
  --resize-handle-hover: #52525b;

  /* Tab bar */
  --tab-bg: transparent;
  --tab-bg-hover: #27272a;
  --tab-bg-active: #3f3f46;
  --tab-fg: #a1a1aa;
  --tab-fg-active: #fafafa;
  --tab-border: #3f3f46;
}

html,
body,
#root {
  height: 100%;
  margin: 0;
  padding: 0;
  overflow: hidden;
  background: transparent;
}

body {
  background-color: transparent;
  color: var(--body-fg);
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen,
    Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
}

/* Disable default focus outlines - we use custom focus indicators where needed */
*:focus {
  outline: none;
}

/* Disable text selection globally except in terminals and inputs */
* {
  user-select: none;
  -webkit-user-select: none;
}

input,
textarea,
[contenteditable="true"],
.xterm {
  user-select: text;
  -webkit-user-select: text;
}

/* Disable the blue highlight when clicking/tapping on elements */
* {
  -webkit-tap-highlight-color: transparent;
}

/* Overlay scrollbars - prevent layout shift when scrollbars appear/disappear */
* {
  scrollbar-width: thin;
  scrollbar-color: var(--scrollbar-thumb) transparent;
}

*::-webkit-scrollbar {
  width: 8px;
  height: 8px;
  background: transparent;
}

*::-webkit-scrollbar-track {
  background: transparent;
}

*::-webkit-scrollbar-thumb {
  background: var(--scrollbar-thumb);
  border-radius: 4px;
}

*::-webkit-scrollbar-thumb:hover {
  background: var(--scrollbar-thumb-hover);
}

/* Reserve scrollbar gutter to prevent layout shift in vertical scrolling */
.overflow-y-auto,
.overflow-auto {
  scrollbar-gutter: stable;
}

/* Hide scrollbar but allow scrolling - for tab bars and similar UI */
.scrollbar-none {
  scrollbar-width: none;
}

.scrollbar-none::-webkit-scrollbar {
  display: none;
}

/* React Resizable Panels */
[data-panel-group] {
  display: flex;
  width: 100%;
  height: 100%;
}

[data-panel-group][data-orientation="horizontal"] {
  flex-direction: row;
}

[data-panel-group][data-orientation="vertical"] {
  flex-direction: column;
}

[data-panel] {
  flex: 1;
  overflow: hidden;
}

[data-panel-resize-handle] {
  flex-shrink: 0;
}

/* Prevent xterm canvas from being scaled during resize */
.xterm .xterm-screen {
  overflow: hidden;
}

/* xterm.js scrollbar - style to look like native macOS overlay */
.xterm .xterm-scrollable-element > .scrollbar {
  width: 8px !important;
  right: 2px !important;
}

.xterm .xterm-scrollable-element > .scrollbar > .slider {
  background: var(--scrollbar-thumb) !important;
  border-radius: 4px !important;
  width: 6px !important;
  left: 1px !important;
}

.xterm .xterm-scrollable-element > .scrollbar > .slider:hover {
  background: var(--scrollbar-thumb-hover) !important;
}

/* Monaco editor scrollbar - style to match app */
.monaco-editor .scrollbar .slider {
  border-radius: 4px !important;
}

.monaco-diff-editor .scrollbar .slider {
  border-radius: 4px !important;
}

/* Make diff editor vertical scrollbar transparent but still functional/grabbable */
.monaco-diff-editor .monaco-scrollable-element > .scrollbar.vertical > .slider {
  background: transparent !important;
}

/* Hide decorations overview ruler (not the diff markers) */
.monaco-diff-editor .decorationsOverviewRuler {
  display: none !important;
}

/* Replace diagonal fill pattern with subtle solid color */
.monaco-diff-editor .diagonal-fill {
  background: var(--bg-2) !important;
}

/* Remove shadow and use normal border color for split diff view */
.monaco-diff-editor.side-by-side .editor.modified {
  box-shadow: none !important;
  border-left: 1px solid var(--border-1) !important;
}

/* macOS title bar drag region */
[data-tauri-drag-region] {
  -webkit-app-region: drag;
  user-select: none;
}

[data-tauri-drag-region] button,
[data-tauri-drag-region] a,
[data-tauri-drag-region] input {
  -webkit-app-region: no-drag;
}

/* Toast animations */
@keyframes toast-slide-in {
  from {
    opacity: 0;
    transform: translateY(8px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

@keyframes toast-slide-out {
  from {
    opacity: 1;
    transform: translateY(0);
  }
  to {
    opacity: 0;
    transform: translateY(8px);
  }
}

.toast-enter {
  animation: toast-slide-in 0.2s ease-out;
}

.toast-exit {
  animation: toast-slide-out 0.2s ease-in forwards;
}

/* Modal button hover states */
.modal-btn:not(:disabled):hover {
  background: var(--hover-bg) !important;
}

/* Modal toggle button hover states */
.modal-toggle:hover {
  background: var(--modal-item-highlight) !important;
}

/* ========================================
   Theme-aware utility classes
   These replace hardcoded Tailwind colors
   ======================================== */

/* Backgrounds */
.bg-theme-0 { background-color: var(--bg-0); }
.bg-theme-1 { background-color: var(--bg-1); }
.bg-theme-2 { background-color: var(--bg-2); }
.bg-theme-3 { background-color: var(--bg-3); }
.bg-theme-4 { background-color: var(--bg-4); }

/* Backgrounds with opacity variants */
.bg-theme-2\/50 { background-color: color-mix(in srgb, var(--bg-2) 50%, transparent); }
.bg-theme-2\/95 { background-color: color-mix(in srgb, var(--bg-2) 95%, transparent); }
.bg-theme-3\/50 { background-color: color-mix(in srgb, var(--bg-3) 50%, transparent); }

/* Text colors */
.text-theme-0 { color: var(--fg-0); }
.text-theme-1 { color: var(--fg-1); }
.text-theme-2 { color: var(--fg-2); }
.text-theme-3 { color: var(--fg-3); }
.text-theme-4 { color: var(--fg-4); }

/* Borders */
.border-theme-0 { border-color: var(--border-0); }
.border-theme-1 { border-color: var(--border-1); }
.border-theme-2 { border-color: var(--border-2); }

/* Sidebar-specific */
.bg-sidebar { background-color: var(--sidebar-bg); }
.text-sidebar { color: var(--sidebar-fg); }
.border-sidebar { border-color: var(--sidebar-border); }
.bg-sidebar-border { background-color: var(--sidebar-border); }
.bg-sidebar-hover { background-color: var(--sidebar-item-hover); }
.bg-sidebar-active { background-color: var(--sidebar-item-active); }

/* Status colors */
.text-accent { color: var(--accent); }
.bg-accent { background-color: var(--accent); }
.border-accent { border-color: var(--accent); }
.text-success { color: var(--success); }
.text-warning { color: var(--warning); }
.text-error { color: var(--error); }
.text-info { color: var(--info); }

/* Resize handles */
.bg-resize-handle { background-color: var(--resize-handle); }
.hover\:bg-resize-handle-hover:hover { background-color: var(--resize-handle-hover); }

/* Tab bar */
.bg-tab { background-color: var(--tab-bg); }
.bg-tab-hover { background-color: var(--tab-bg-hover); }
.bg-tab-active { background-color: var(--tab-bg-active); }
.text-tab { color: var(--tab-fg); }
.text-tab-active { color: var(--tab-fg-active); }
.border-tab { border-color: var(--tab-border); }

/* Hover states - using :hover pseudo-class */
.hover\:bg-theme-2:hover { background-color: var(--bg-2); }
.hover\:bg-theme-3:hover { background-color: var(--bg-3); }
.hover\:bg-theme-4:hover { background-color: var(--bg-4); }
.hover\:text-theme-0:hover { color: var(--fg-0); }
.hover\:text-theme-1:hover { color: var(--fg-1); }
.hover\:text-theme-2:hover { color: var(--fg-2); }
.hover\:text-accent:hover { color: var(--accent); }
.hover\:text-error:hover { color: var(--error); }

/* Placeholder colors */
.placeholder-theme-3::placeholder { color: var(--fg-3); }
.placeholder-theme-4::placeholder { color: var(--fg-4); }

/* Border opacity variants */
.border-theme-1\/50 { border-color: color-mix(in srgb, var(--border-1) 50%, transparent); }
.border-sidebar\/50 { border-color: color-mix(in srgb, var(--sidebar-border) 50%, transparent); }

/* Background opacity variants for drag overlays */
.bg-theme-1\/60 { background-color: color-mix(in srgb, var(--bg-1) 60%, transparent); }

/* Focus ring offset - for styled checkboxes */
.focus\:ring-offset-theme-1:focus { --tw-ring-offset-color: var(--bg-1); }
.focus\:ring-offset-theme-2:focus { --tw-ring-offset-color: var(--bg-2); }
